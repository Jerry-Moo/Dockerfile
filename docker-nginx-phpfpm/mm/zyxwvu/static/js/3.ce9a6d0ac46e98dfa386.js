webpackJsonp([3],{aT8L:function(t,i){},clNx:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("Xxa5"),s=e.n(a),o=e("exGp"),n=e.n(o),r=e("mvHQ"),c=e.n(r),l=e("woOf"),u=e.n(l),h=e("Yibb"),d=e("oQxe"),m={name:"PageIframe",data:function(){return{setting:{},baseUrl:"",jumpUrl:"",paramList:{},iuCode:204,baseParams:"",userId:"",platform:"",scrollFlag:!0,scrollId:"",activeId:"",activeTime:0,activeDelay:0,timesCount:0,stayCount:0,pvCount:0,loadCount:0,historyLen:0,loadingFlag:!0,dialogFlag:!0,confirmFlag:!1,dialogData:{},confirmData:{}}},computed:{config:function(){return this.$store.state.config}},created:function(){this.initConfig(),this.initParams(),this.checkHistory(),this.initPage(),this.initCounter()},methods:{initConfig:function(){this.setting=this.$route.params.setting||"",this.setting||this.goBackHome(),this.iframeData=this.setting.module_iframe||"",this.dialogData=this.iframeData.module_dialog||"",this.confirmData=this.iframeData.module_confirm||""},initParams:function(){this.paramList=u()(this.paramList,this.util._getQueryObj_()),this.baseParams=c()(this.util._getQueryObj_()),this.baseUrl=this.setting.__baseUrl||"",this.stayCount=this.setting.__stayCount||60,this.platform=window.btoa(navigator.platform).replace(/=/g,"")||"",this.userId=this.$route.params.userId||"",this.paramList.clickurl?this.jumpUrl=decodeURIComponent(this.paramList.clickurl):this.jumpUrl=this.setting.__jumpUrl||""},initPage:function(){var t=this;this.closeFooter(),"tp0"===this.paramList.tp&&(this.closeHeader(),this.dialogFlag=!1),"tp1"===this.paramList.tp&&(this.dialogFlag=!1),this.$nextTick(function(){t.setIframeHeight()})},initCounter:function(){var t=this;return n()(s.a.mark(function i(){return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.util._checkCompass_();case 2:if(i.t0=i.sent,i.t0){i.next=5;break}i.t0=204;case 5:t.iuCode=i.t0,t.countReal(),t.countActive(),window.addEventListener("scroll",t.util._throttle_(t.countScroll,2e3));case 9:case"end":return i.stop()}},i,t)}))()},checkHistory:function(){var t=this;history.pushState(null,null,document.URL),this.historyLen=history.length,window.addEventListener("popstate",function(){history.pushState(null,null,document.URL),t.historyLen=history.length}),this.itimer=setInterval(function(){t.historyLen!==history.length&&(t.countJump(),t.loadCount++,history.pushState(null,null,document.URL),t.historyLen=history.length)},100)},doLoad:function(){this.loadingFlag=!1;var t=this.paramList.cf?parseInt(this.paramList.cf):"";this.loadCount===t&&(this.confirmFlag=!0)},goBackHome:function(){this.$router.push({path:"./",query:{}})},setIframeHeight:function(){var t=window.innerHeight-(document.querySelector(".wave-header").getBoundingClientRect().height||0);document.querySelector(".iframe-container").style.height=t+"px"},closeHeader:function(){var t=this.config;t.module_header="XXmodule_header",this.$store.dispatch("setConfigData",t)},closeFooter:function(){var t=this.config;t.module_footer="XXmodule_footer",this.$store.dispatch("setConfigData",t)},closeDialog:function(){this.dialogFlag=!1,this.countClick(),this.timesCount++},closeconfirm:function(){this.confirmFlag=!1},receiveconfirm:function(){this.confirmFlag=!1;var t=this.paramList.cfl?decodeURIComponent(this.paramList.cfl):"";t?window.location.href=t:(this.loadCount++,this.jumpUrl=this.confirmData.url)},countVisit:function(){var t=this;if(this.setting.debug){var i=this.baseUrl+"/detect/addenter",e={clickid:this.paramList.clickid||"",params:this.baseParams||"",iu:this.iuCode||"",plat:this.platform||"",type:1};this.post(i,e).then(function(i){t.userId=i.data?i.data.uid:"",t.countReal(),t.countActive()})}},countReal:function(){var t=this;if(this.setting.debug){window!==parent&&(this.iuCode=205);var i=this.baseUrl+"/detect/addreal",e={uid:this.userId||"",clickid:this.paramList.clickid||"",params:this.baseParams||"",iu:this.iuCode||"",plat:this.platform||"",count:this.pvCount||0,type:1};this.post(i,e),setTimeout(function(){204===t.iuCode?t.countImg("event5=1"):t.countImg("event5=0")},500)}},countStay:function(){var t=this;this.activeTime>this.stayCount||(this.countLeave(),this.activeDelay+=1e3,this.activeTime+=this.activeDelay/1e3,setTimeout(function(){t.countStay()},this.activeDelay))},countActive:function(){var t=this;if(this.setting.debug){var i=this.baseUrl+"/detect/addactive",e={clickid:this.paramList.clickid||"",params:this.baseParams||"",iu:this.iuCode||"",uid:this.userId||"",plat:this.platform||"",type:1};this.post(i,e).then(function(i){t.activeId=i.data?i.data.rowid:"",t.countStay()})}},countLeave:function(){if(this.setting.debug){this.activeTime>=15&&this.activeTime<21&&this.countImg("event7=1");var t=this.baseUrl+"/detect/addleave",i={clickid:this.paramList.clickid||"",uid:this.userId||"",linkurl:this.paramList.clickurl||"",params:this.baseParams||"",iu:this.iuCode||"",plat:this.platform||"",count:this.activeTime||"",id:this.activeId||"",type:1};this.post(t,i)}},countClick:function(t){if(this.setting.debug){0===this.timesCount&&this.countImg("event9=1");var i=t||event;this.iuCode=i.isTrusted?this.iuCode:203;var e=parseInt(i.clientX)||0,a=parseInt(i.clientY)||0,s=this.baseUrl+"/detect/addclick",o={clickid:this.paramList.clickid,uid:this.userId,count:this.timesCount,params:this.baseParams,iu:this.iuCode,plat:this.platform,x:e,y:a,type:1};this.post(s,o)}},countScroll:function(){var t=this;if(this.setting.debug&&(this.scrollFlag||this.scrollId)){this.scrollId||this.countImg("event6=1"),this.scrollFlag=!1;var i=document.documentElement.scrollTop||document.body.scrollTop||0,e=this.baseUrl+"/detect/addscroll",a={clickid:this.paramList.clickid||"",params:this.baseParams||"",iu:this.iuCode||"",uid:this.userId||"",id:this.scrollId||"",plat:this.platform||"",count:i||0,type:1};this.post(e,a).then(function(i){t.scrollId=i.data?i.data.rowid:""})}},countJump:function(){if(this.setting.debug){this.loadCount>=0&&this.countImg("event8=1");var t=this.baseUrl+"/detect/addjump",i={clickid:this.paramList.clickid||"",uid:this.userId||"",linkurl:this.paramList.clickurl||"",params:this.baseParams||"",iu:this.iuCode||"",plat:this.platform||"",count:this.loadCount||0,type:1};this.post(t,i)}},countImg:function(t){var i="log_"+(new Date).getTime(),e=window[i]=new Image;e.onload=e.onerror=function(){window[i]=null},e.src="http://tk.adsjump.com/click.php?"+t,e=null}},destroyed:function(){clearInterval(this.itimer)},components:{WaveDialog:h.a,WaveLoading:d.a}},f={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"iframe-container"},[t.iframeData&&t.jumpUrl?e("iframe",{staticClass:"iframe-box",style:t.iframeData.__style,attrs:{src:t.jumpUrl,frameborder:"no"},on:{load:t.doLoad}}):t._e(),t._v(" "),e("wave-dialog",{directives:[{name:"show",rawName:"v-show",value:t.dialogFlag&&t.dialogData,expression:"dialogFlag && dialogData"}],style:t.dialogData.__style,attrs:{data:t.dialogData},on:{close:function(i){return t.closeDialog()},receive:function(i){return t.receiveDialog()}}}),t._v(" "),e("wave-dialog",{directives:[{name:"show",rawName:"v-show",value:t.confirmFlag&&t.confirmData,expression:"confirmFlag && confirmData"}],style:t.confirmData.__style,attrs:{data:t.confirmData},on:{close:function(i){return t.closeconfirm()},receive:function(i){return t.receiveconfirm()}}}),t._v(" "),t.loadingFlag?e("wave-loading"):t._e()],1)},staticRenderFns:[]};var p=e("VU/8")(m,f,!1,function(t){e("aT8L")},"data-v-82a5927a",null);i.default=p.exports}});